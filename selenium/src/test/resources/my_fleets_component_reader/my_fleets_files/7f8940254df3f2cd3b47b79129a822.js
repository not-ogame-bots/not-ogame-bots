ogame.buddies={initBuddyList:function(){$.tablesorter.addParser({id:"coordinates",is:function(a){return false},format:function(c){var b=$.trim(c).slice(1,-1).split(":");var a=(b[0]*16384)+(b[1]*32)+b[2]*1;return a},type:"numeric"});$.tablesorter.addParser({id:"commaDigit",is:function(a,b){var d=b.config;return jQuery.tablesorter.isDigit(a.replace(/\./g,""),d)},format:function(a){return jQuery.tablesorter.formatFloat(a.replace(/\./g,""))},type:"numeric"});$(".content_table").tablesorter({widgets:["zebra"],headers:{0:{sorter:false},2:{sorter:"commaDigit"},5:{sorter:"coordinates"},6:{sorter:false}},cssHeader:"ct_sortable_title",cssAsc:"ct_sort_asc",cssDesc:"ct_sort_desc"});$("#buddylist").off(".buddyList");$("#buddylist").on("click.buddyList",".deleteBuddy",deleteBuddy);$("#chatContent").on("click.chat_info",".deleteBuddy",deleteBuddy)},initBuddies:function(){$(".zebra tr").mouseover(function(){$(this).addClass("over")}).mouseout(function(){$(this).removeClass("over")});$(".js_accordion").accordion({collapsible:true,heightStyle:"content"});$(".js_tabs").tabs();$(".js_scrollbar").mCustomScrollbar({theme:"ogame"})}};function initInviteCodes(){$("#buddyinvite .code").click(function(){$(this).selectText()})}function incrementBuddyCount(){var b=parseInt($("#buddyCount").text())+1;var a=parseInt($("#newRequestCount").text())-1;updateRequestCount(a);updateBuddyCount(b)}function updateRequestCount(a){$("#newRequestCount").html(a)}function updateBuddyCount(a){$("#buddyCount").html(a)}function reportMessage(c,b,a){$.ajax({type:"POST",url:"?page=reportSpam_ajax",dataType:"json",data:{messageId:c,from:b,to:a},success:function(d){fadeBox(d.message,!d.result)},error:function(){}})}function reportAllyMessage(b,a){$.ajax({type:"POST",url:"?page=reportSpam_ajax",dataType:"json",data:{messageId:b,from:a},success:function(c){fadeBox(c.message,!c.result)},error:function(){}})}var elem,messageId,senderId;function reportAllyRoundMessage(c,b,d,a){elem=c;messageId=b;senderId=d;errorBoxDecision(LocalizationStrings.attention,a,LocalizationStrings.yes,LocalizationStrings.no,reportMessageCallback)}function reportMessageCallback(){elem.hide();reportAllyMessage(messageId,senderId)}function requestsReady(){$(document).on("click",".acceptRequest",acceptRequest);$(document).on("click",".rejectRequest",rejectRequest);$(document).on("click",".cancelRequest",cancelRequest);$(document).on("click",".reportRequest",reportRequest)}function initBuddyRequestForm(){$(".overlayDiv .buddyRequest form").unbind("submit").bind("submit",function(b){var a=$(this);b.preventDefault();$.post(a.attr("action"),a.serialize(),"html").done(function(c){document.open();document.write(c);document.close()}).fail(function(){var c=window.location.href;window.location=c.substring(0,c.indexOf("?"))+"?page=ingame&component=buddies"}).always(function(){return false})});$(".buddyRequest").each(function(){var b=$(this);var a=b.parents(".ui-dialog").find(".ui-dialog-title");if(!a.find("span.buddyName").length){a.append($(document.createElement("span")).addClass("buddyName").text(" ("+b.attr("data-title")+")"))}})};