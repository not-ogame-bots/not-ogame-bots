$(function(){$(".percentSelector").each(function(){PercentSelector.initBar(this)})});var PercentSelector={};PercentSelector.fallbackMode=false;PercentSelector.initBar=function(bar){if(!bar){return}var $bar=$(bar);var height=$bar.innerHeight();$bar.children(".PBcolorGrad").remove();$bar.children(".PBoverlay").remove();var opcAttr=$bar.attr("onpercentchange");if(opcAttr){if(typeof opcAttr=="function"){$bar.get(0).onpercentchange=opcAttr}else{if(typeof opcAttr=="string"){if(/^function/.test(opcAttr)){eval("$bar.get(0).onpercentchange = "+opcAttr)}else{eval("$bar.get(0).onpercentchange = function() {"+opcAttr+"}")}}}}if(!PercentSelector.fallbackMode){$bar.append($("<canvas class='PBoverlay'></canvas>").css("height",height).css("width",$bar.innerWidth()));$bar.append($("<div class='PBcolorGrad'></div>").css("height",height*20).css("top",-(2*height)));PercentSelector.createOverlay($bar)}else{$bar.addClass("fallback");$bar.append($("<div class='PBfallbackColor'></div>").css("height",height).css("width",$bar.innerWidth()))}if($bar.attr("percent")!=null){var percent=parseInt($bar.attr("percent"));$bar.attr("percent",100);PercentSelector.setPercent($bar,percent,true)}if(!bar.isBound){if(!($bar.attr("enabled")&&$bar.attr("enabled").toLowerCase()=="false")){var $bindBar=$bar;if(document.createTouch==undefined){$bindBar.bind("mousedown",PercentSelector.handlers.mouseDown);$bindBar.bind("mousemove",PercentSelector.handlers.mouseMove);$bindBar.bind("mouseup",PercentSelector.handlers.mouseUp);$bindBar.bind("mouseout",PercentSelector.handlers.mouseOut)}else{$bindBar.bind("touchstart",PercentSelector.handlers.touchStart);$bindBar.bind("touchmove",PercentSelector.handlers.touchMove);$bindBar.bind("touchend",PercentSelector.handlers.touchEnd)}}bar.isBound=true}};PercentSelector.setPercent=function(f,b,d){var g=$(f);var e=g.attr("step");if(!e){e=1}else{e=parseInt(e)}b=Math.round(b/e)*e;if(b==parseInt(g.attr("percent"))){return}g.attr("percent",b);if(PercentSelector.fallbackMode){g.children(".PBfallbackColor").css("width",g.innerWidth()*b/100)}else{if(d){g.children(".PBcolorGrad").css("-webkit-transition","-webkit-transform 0.6s ease-in");g.children(".PBcolorGrad").css("-moz-transition","-moz-transform 0.6s ease-in")}else{g.children(".PBcolorGrad").css("-webkit-transition","-webkit-transform 0.1s ease-in");g.children(".PBcolorGrad").css("-moz-transition","-moz-transform 0.1s ease-in")}var a=Math.round((g.children(".PBcolorGrad").outerHeight()*0.9)*(100-b)/100);var c=Math.round(g.children(".PBcolorGrad").innerWidth()*((100-b)/100));if(d){setTimeout(function(){g.children(".PBcolorGrad").css("-webkit-transform","translate(-"+c+"px, -"+a+"px)");g.children(".PBcolorGrad").css("-moz-transform","translate(-"+c+"px, -"+a+"px)");g.children(".PBcolorGrad").css("-ms-transform","translate(-"+c+"px, -"+a+"px)")},1)}else{g.children(".PBcolorGrad").css("-webkit-transform","translate(-"+c+"px, -"+a+"px)");g.children(".PBcolorGrad").css("-moz-transform","translate(-"+c+"px, -"+a+"px)");g.children(".PBcolorGrad").css("-ms-transform","translate(-"+c+"px, -"+a+"px)")}}};PercentSelector.setPercentFromPageX=function(f,c,b){var g=$(f);var a=c-g.offset().left;var d=g.outerWidth();var e=100*a/d;if(e>100){e=100}if(e<10){e=10}e=Math.round(e);PercentSelector.setPercent(f,e,b)};PercentSelector.createOverlay=function(g){var d=$(g);$overlay=d.children(".PBoverlay");var a=$overlay.innerWidth();var k=$overlay.innerHeight();var c=$overlay.get(0);c.width=a;c.height=k;var l=c.getContext("2d");var b=l.createLinearGradient(0,0,0,k);b.addColorStop(0,"rgba(0,0,0,0.05)");b.addColorStop(1,"rgba(0,0,0,0.3)");l.fillStyle=b;l.fillRect(0,0,a,k);l.clearRect(3,3,a-6,k-6);b=l.createLinearGradient(0,0,0,k);b.addColorStop(0,"rgba(0,0,0,0.2)");b.addColorStop(1,"rgba(0,0,0,0.05)");l.fillStyle=b;l.fillRect(3,3,a-6,k-6);var e=d.attr("step");if(!e){e=100}l.lineWidth=1;var j=a/e;var h=a/e;for(var f=0;f*e<100;f+=1){var i=Math.floor(f*e*a/100)-0.5;l.beginPath();l.font="12px serif";l.fillStyle="white";l.strokeStyle="black";l.textAlign="center";l.textBaseline="middle";l.fillText(((f+1)*10).toString(),i+h/2,k/2,j);l.moveTo(i,k);l.lineTo(i,k*0.75);l.closePath();l.stroke()}};PercentSelector.handlers={};PercentSelector.handlers.touchDragging=false;PercentSelector.handlers.touchStart=function(a){var b=a.originalEvent.touches;if(b.length>1){return}a.preventDefault();PercentSelector.handlers.touchDragging=false};PercentSelector.handlers.touchEnd=function(b){touches=b.originalEvent.touches;if(touches.length==0){touches=b.originalEvent.changedTouches}if(touches.length>1){return}var a=touches[0].target.parentNode;PercentSelector.setPercentFromPageX(a,touches[0].pageX,true);if(a.onpercentchange!=undefined){a.onpercentchange($(a).attr("percent"))}b.preventDefault()};PercentSelector.handlers.touchMove=function(a){PercentSelector.handlers.touchDragging=true;var b=a.originalEvent.touches;if(b.length>1){return}a.preventDefault();PercentSelector.setPercentFromPageX(b[0].target.parentNode,b[0].pageX)};PercentSelector.handlers.mouseDragging=false;PercentSelector.handlers.mouseDown=function(a){PercentSelector.handlers.mouseDragging=true};PercentSelector.handlers.mouseOut=function(b){if(PercentSelector.handlers.mouseDragging){var a=(PercentSelector.fallbackMode)?b.currentTarget:b.originalEvent.target.parentNode}PercentSelector.handlers.mouseDragging=false};PercentSelector.handlers.mouseUp=function(b){PercentSelector.handlers.mouseDragging=false;var a=(PercentSelector.fallbackMode)?b.currentTarget:b.originalEvent.target.parentNode;PercentSelector.setPercentFromPageX(a,b.pageX,true)};PercentSelector.handlers.mouseMove=function(b){if(PercentSelector.handlers.mouseDragging){b.preventDefault();var a=(PercentSelector.fallbackMode)?b.currentTarget:b.originalEvent.target.parentNode;PercentSelector.setPercentFromPageX(a,b.pageX)}};