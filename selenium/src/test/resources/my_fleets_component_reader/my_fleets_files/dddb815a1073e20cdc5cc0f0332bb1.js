var LazyLoader;(function(a){LazyLoader={pendingCssFiles:[],loadedCssFiles:[],pendingJsFiles:[],loadedJsFiles:[],_downloadCompleteHandler:function(b,c){switch(b){case"css":LazyLoader.pendingCssFiles=a.grep(LazyLoader.pendingCssFiles,function(d){return d!=c});LazyLoader.loadedCssFiles.push(c);if(LazyLoader.pendingCssFiles.length===0){a(document).trigger("cssComplete")}break;case"js":LazyLoader.pendingJsFiles=a.grep(LazyLoader.pendingJsFiles,function(d){return d!=c});LazyLoader.loadedJsFiles.push(c);if(LazyLoader.pendingJsFiles.length===0){a(document).trigger("jsComplete")}break}if(LazyLoader.pendingCssFiles.length===0&&LazyLoader.pendingJsFiles.length===0){a(document).trigger("allComplete")}},_loadCssFiles:function(b){var c=[];a.each(b,function(d,e){if(a.inArray(e,LazyLoader.pendingCssFiles)>-1||a.inArray(e,LazyLoader.loadedCssFiles)>-1){return true}LazyLoader.pendingCssFiles.push(e);c.push(a("<link />").attr("href",e).attr("rel","stylesheet").on("load",{path:e},function(f){LazyLoader._downloadCompleteHandler("css",f.data.path)}))});if(c.length===0){return{status:"done"}}a(c).map(a.fn.toArray).appendTo("head");return{status:"queued"}},_loadJsFiles:function(b){var c=false;a.each(b,function(d,e){if(a.inArray(e,LazyLoader.pendingJsFiles)>-1||a.inArray(e,LazyLoader.loadedJsFiles)>-1){return true}c=true;LazyLoader.pendingJsFiles.push(e);a.ajax({cache:true,url:e,dataType:"script",}).success(function(){LazyLoader._downloadCompleteHandler("js",e)})});if(!c){return{status:"done"}}return{status:"queued"}},loadFiles:function(b,c){var d=LazyLoader._loadCssFiles(b);var e=LazyLoader._loadJsFiles(c);if(d.status==="done"&&e.status==="done"){a(document).trigger("allComplete")}}};a(document).ready(function(){a("#mainmenucomponent li.has-sub > a").on("click",function(){a(this).removeAttr("href");var b=a(this).parent("li");if(b.hasClass("open")){b.removeClass("open");b.find("li").removeClass("open");b.find("ul").slideUp(50)}else{b.addClass("open");b.children("ul").slideDown(50);b.siblings("li").children("ul").slideUp(50);b.siblings("li").removeClass("open");b.siblings("li").find("li").removeClass("open");b.siblings("li").find("ul").slideUp(50)}});a("[data-link]").on("click",function(){a.ajax({url:a(this).data("link"),statusCode:{404:function(){alert("page not found")}}}).done(function(c){var b=a.parseJSON(c);a(document).off("allComplete").on("allComplete",{json:b},function(d){a(".injectedComponent").remove();a(".maincontent").children("div:first-child").replaceWith(d.data.json.content[d.data.json.target]);a(".maincontent").attr("id",d.data.json.target+"component");delete d.data.json.content[d.data.json.target];a.each(d.data.json.content,function(e,f){a("#"+d.data.json.target+"component").after(f)});history.pushState(d.data.json.page.stateObj,d.data.json.page.title,d.data.json.page.url);currentPage=d.data.json.target;serverTime=new Date(d.data.serverTime)});LazyLoader.loadFiles(b.files.css,b.files.js)})})})})(jQuery);