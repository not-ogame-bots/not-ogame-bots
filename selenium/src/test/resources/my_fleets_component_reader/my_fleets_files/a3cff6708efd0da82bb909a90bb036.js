(function(c){var b={init:function(d){var e=this;if(!e.data("jqv")||e.data("jqv")==null){d=b._saveOptions(e,d);c(document).on("click",".formError",function(){c(this).fadeOut(150,function(){c(this).parent(".formErrorOuter").remove();c(this).remove()})})}return this},attach:function(f){var e=this;var d;if(f){d=b._saveOptions(e,f)}else{d=e.data("jqv")}d.validateAttribute=(e.find("[data-validation-engine*=validate]").length)?"data-validation-engine":"class";if(d.binded){e.on(d.validationEventTrigger,"["+d.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",b._onFieldEvent);e.on("click","["+d.validateAttribute+"*=validate][type=checkbox],["+d.validateAttribute+"*=validate][type=radio]",b._onFieldEvent);e.on(d.validationEventTrigger,"["+d.validateAttribute+"*=validate][class*=datepicker]",{delay:300},b._onFieldEvent)}if(d.autoPositionUpdate){c(window).bind("resize",{noAnimation:true,formElem:e},b.updatePromptsPosition)}e.on("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",b._submitButtonClick);e.removeData("jqv_submitButton");e.on("submit",b._onSubmitEvent);return this},detach:function(){var e=this;var d=e.data("jqv");e.find("["+d.validateAttribute+"*=validate]").not("[type=checkbox]").off(d.validationEventTrigger,b._onFieldEvent);e.find("["+d.validateAttribute+"*=validate][type=checkbox],[class*=validate][type=radio]").off("click",b._onFieldEvent);e.off("submit",b._onSubmitEvent);e.removeData("jqv");e.off("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",b._submitButtonClick);e.removeData("jqv_submitButton");if(d.autoPositionUpdate){c(window).off("resize",b.updatePromptsPosition)}return this},validate:function(){var e=c(this);var g=null;if(e.is("form")||e.hasClass("validationEngineContainer")){if(e.hasClass("validating")){return false}else{e.addClass("validating");var d=e.data("jqv");var g=b._validateFields(this);setTimeout(function(){e.removeClass("validating")},100);if(g&&d.onSuccess){d.onSuccess()}else{if(!g&&d.onFailure){d.onFailure()}}}}else{if(e.is("form")||e.hasClass("validationEngineContainer")){e.removeClass("validating")}else{var f=e.closest("form, .validationEngineContainer"),d=(f.data("jqv"))?f.data("jqv"):c.validationEngine.defaults,g=b._validateField(e,d);if(g&&d.onFieldSuccess){d.onFieldSuccess()}else{if(d.onFieldFailure&&d.InvalidFields.length>0){d.onFieldFailure()}}}}if(d.onValidationComplete){return !!d.onValidationComplete(f,g)}return g},updatePromptsPosition:function(g){if(g&&this==window){var f=g.data.formElem;var d=g.data.noAnimation}else{var f=c(this.closest("form, .validationEngineContainer"))}var e=f.data("jqv");f.find("["+e.validateAttribute+"*=validate]").not(":disabled").each(function(){var j=c(this);if(e.prettySelect&&j.is(":hidden")){j=f.find("#"+e.usePrefix+j.attr("id")+e.useSuffix)}var h=b._getPrompt(j);var i=c(h).find(".formErrorContent").html();if(h){b._updatePrompt(j,c(h),i,undefined,false,e,d)}});return this},showPrompt:function(e,g,i,f){var h=this.closest("form, .validationEngineContainer");var d=h.data("jqv");if(!d){d=b._saveOptions(this,d)}if(i){d.promptPosition=i}d.showArrow=f==true;b._showPrompt(this,e,g,false,d);return this},hide:function(){var g=c(this).closest("form, .validationEngineContainer");var e=g.data("jqv");var f=(e&&e.fadeDuration)?e.fadeDuration:0.3;var d;if(c(this).is("form")||c(this).hasClass("validationEngineContainer")){d="parentForm"+b._getClassName(c(this).attr("id"))}else{d=b._getClassName(c(this).attr("id"))+"formError"}c("."+d).fadeTo(f,0.3,function(){c(this).parent(".formErrorOuter").remove();c(this).remove()});return this},hideAll:function(){var e=this;var d=e.data("jqv");var f=d?d.fadeDuration:300;c(".formError").fadeTo(f,300,function(){c(this).parent(".formErrorOuter").remove();c(this).remove()});return this},_onFieldEvent:function(f){var g=c(this);var e=g.closest("form, .validationEngineContainer");var d=e.data("jqv");d.eventTrigger="field";window.setTimeout(function(){b._validateField(g,d);if(d.InvalidFields.length==0&&d.onFieldSuccess){d.onFieldSuccess()}else{if(d.InvalidFields.length>0&&d.onFieldFailure){d.onFieldFailure()}}},(f.data)?f.data.delay:0)},_onSubmitEvent:function(){var g=c(this);var d=g.data("jqv");if(g.data("jqv_submitButton")){var e=c("#"+g.data("jqv_submitButton"));if(e){if(e.length>0){if(e.hasClass("validate-skip")||e.attr("data-validation-engine-skip")=="true"){return true}}}}d.eventTrigger="submit";var f=b._validateFields(g);if(f&&d.ajaxFormValidation){b._validateFormWithAjax(g,d);return false}if(d.onValidationComplete){return !!d.onValidationComplete(g,f)}return f},_checkAjaxStatus:function(e){var d=true;c.each(e.ajaxValidCache,function(f,g){if(!g){d=false;return false}});return d},_checkAjaxFieldStatus:function(d,e){return e.ajaxValidCache[d]==true},_validateFields:function(f){var n=f.data("jqv");var g=false;f.trigger("jqv.form.validating");var o=null;f.find("["+n.validateAttribute+"*=validate]").not(":disabled").each(function(){var q=c(this);var p=[];if(c.inArray(q.attr("name"),p)<0){g|=b._validateField(q,n);if(g&&o==null){if(q.is(":hidden")&&n.prettySelect){o=q=f.find("#"+n.usePrefix+b._jqSelector(q.attr("id"))+n.useSuffix)}else{if(q.data("jqv-prompt-at") instanceof jQuery){q=q.data("jqv-prompt-at")}else{if(q.data("jqv-prompt-at")){q=c(q.data("jqv-prompt-at"))}}o=q}}if(n.doNotShowAllErrosOnSubmit){return false}p.push(q.attr("name"));if(n.showOneMessage==true&&g){return false}}});f.trigger("jqv.form.result",[g]);if(g){if(n.scroll){var m=o.offset().top;var i=o.offset().left;var k=n.promptPosition;if(typeof(k)=="string"&&k.indexOf(":")!=-1){k=k.substring(0,k.indexOf(":"))}if(k!="bottomRight"&&k!="bottomLeft"){var j=b._getPrompt(o);if(j){m=j.offset().top}}if(n.scrollOffset){m-=n.scrollOffset}if(n.isOverflown){var d=c(n.overflownDIV);if(!d.length){return false}var e=d.scrollTop();var h=-parseInt(d.offset().top);m+=e+h-5;var l=c(n.overflownDIV+":not(:animated)");l.animate({scrollTop:m},1100,function(){if(n.focusFirstField){o.focus()}})}else{c("html, body").animate({scrollTop:m},1100,function(){if(n.focusFirstField){o.focus()}});c("html, body").animate({scrollLeft:i},1100)}}else{if(n.focusFirstField){o.focus()}}return false}return true},_validateFormWithAjax:function(h,f){var i=h.serialize();var g=(f.ajaxFormValidationMethod)?f.ajaxFormValidationMethod:"GET";var e=(f.ajaxFormValidationURL)?f.ajaxFormValidationURL:h.attr("action");var d=(f.dataType)?f.dataType:"json";c.ajax({type:g,url:e,cache:false,dataType:d,data:i,form:h,methods:b,options:f,beforeSend:function(){return f.onBeforeAjaxFormValidation(h,f)},error:function(j,k){b._ajaxError(j,k)},success:function(n){if((d=="json")&&(n!==true)){var l=false;for(var m=0;m<n.length;m++){var o=n[m];var q=o[0];var k=c(c("#"+q)[0]);if(k.length==1){var p=o[2];if(o[1]==true){if(p==""||!p){b._closePrompt(k)}else{if(f.allrules[p]){var j=f.allrules[p].alertTextOk;if(j){p=j}}if(f.showPrompts){b._showPrompt(k,p,"pass",false,f,true)}}}else{l|=true;if(f.allrules[p]){var j=f.allrules[p].alertText;if(j){p=j}}if(f.showPrompts){b._showPrompt(k,p,"",false,f,true)}}}}f.onAjaxFormComplete(!l,h,n,f)}else{f.onAjaxFormComplete(true,h,n,f)}}})},_validateField:function(e,m,t){if(!e.attr("id")){e.attr("id","form-validation-field-"+c.validationEngine.fieldIdCounter);++c.validationEngine.fieldIdCounter}if(!m.validateNonVisibleFields&&(e.is(":hidden")&&!m.prettySelect||e.parent().is(":hidden"))){return false}var v=e.attr(m.validateAttribute);var A=/validate\[(.*)\]/.exec(v);if(!A){return false}var w=A[1];var s=w.split(/\[|,|\]/);var p=false;var k=e.attr("name");var j="";var z="";var u=false;var B=false;m.isError=false;m.showArrow=true;if(m.maxErrorsPerField>0){B=true}var f=c(e.closest("form, .validationEngineContainer"));for(var y=0;y<s.length;y++){s[y]=s[y].replace(" ","");if(s[y]===""){delete s[y]}}for(var y=0,o=0;y<s.length;y++){if(B&&o>=m.maxErrorsPerField){if(!u){var l=c.inArray("required",s);u=(l!=-1&&l>=y)}break}var h=undefined;switch(s[y]){case"required":u=true;h=b._getErrorMessage(f,e,s[y],s,y,m,b._required);break;case"custom":h=b._getErrorMessage(f,e,s[y],s,y,m,b._custom);break;case"groupRequired":var x="["+m.validateAttribute+"*="+s[y+1]+"]";var g=f.find(x).eq(0);if(g[0]!=e[0]){b._validateField(g,m,t);m.showArrow=true}h=b._getErrorMessage(f,e,s[y],s,y,m,b._groupRequired);if(h){u=true}m.showArrow=false;break;case"ajax":h=b._ajax(e,s,y,m);if(h){z="load"}break;case"minSize":h=b._getErrorMessage(f,e,s[y],s,y,m,b._minSize);break;case"maxSize":h=b._getErrorMessage(f,e,s[y],s,y,m,b._maxSize);break;case"min":h=b._getErrorMessage(f,e,s[y],s,y,m,b._min);break;case"max":h=b._getErrorMessage(f,e,s[y],s,y,m,b._max);break;case"past":h=b._getErrorMessage(f,e,s[y],s,y,m,b._past);break;case"future":h=b._getErrorMessage(f,e,s[y],s,y,m,b._future);break;case"dateRange":var x="["+m.validateAttribute+"*="+s[y+1]+"]";m.firstOfGroup=f.find(x).eq(0);m.secondOfGroup=f.find(x).eq(1);if(m.firstOfGroup[0].value||m.secondOfGroup[0].value){h=b._getErrorMessage(f,e,s[y],s,y,m,b._dateRange)}if(h){u=true}m.showArrow=false;break;case"dateTimeRange":var x="["+m.validateAttribute+"*="+s[y+1]+"]";m.firstOfGroup=f.find(x).eq(0);m.secondOfGroup=f.find(x).eq(1);if(m.firstOfGroup[0].value||m.secondOfGroup[0].value){h=b._getErrorMessage(f,e,s[y],s,y,m,b._dateTimeRange)}if(h){u=true}m.showArrow=false;break;case"maxCheckbox":e=c(f.find("input[name='"+k+"']"));h=b._getErrorMessage(f,e,s[y],s,y,m,b._maxCheckbox);break;case"minCheckbox":e=c(f.find("input[name='"+k+"']"));h=b._getErrorMessage(f,e,s[y],s,y,m,b._minCheckbox);break;case"equals":h=b._getErrorMessage(f,e,s[y],s,y,m,b._equals);break;case"funcCall":h=b._getErrorMessage(f,e,s[y],s,y,m,b._funcCall);break;case"creditCard":h=b._getErrorMessage(f,e,s[y],s,y,m,b._creditCard);break;case"condRequired":h=b._getErrorMessage(f,e,s[y],s,y,m,b._condRequired);if(h!==undefined){u=true}break;default:}var n=false;if(typeof h=="object"){switch(h.status){case"_break":n=true;break;case"_error":h=h.message;break;case"_error_no_prompt":return true;break;default:break}}if(n){break}if(typeof h=="string"){j+=h+"<br/>";m.isError=true;o++}}if(!u&&!(e.val())&&e.val().length<1){m.isError=false}var q=e.prop("type");var d=e.data("promptPosition")||m.promptPosition;if((q=="radio"||q=="checkbox")&&f.find("input[name='"+k+"']").size()>1){if(d==="inline"){e=c(f.find("input[name='"+k+"'][type!=hidden]:last"))}else{e=c(f.find("input[name='"+k+"'][type!=hidden]:first"))}m.showArrow=false}if(e.is(":hidden")&&m.prettySelect){e=f.find("#"+m.usePrefix+b._jqSelector(e.attr("id"))+m.useSuffix)}if(m.isError&&m.showPrompts){b._showPrompt(e,j,z,false,m)}else{if(!p){b._closePrompt(e)}}if(!p){e.trigger("jqv.field.result",[e,m.isError,j])}var r=c.inArray(e[0],m.InvalidFields);if(r==-1){if(m.isError){m.InvalidFields.push(e[0])}}else{if(!m.isError){m.InvalidFields.splice(r,1)}}b._handleStatusCssClasses(e,m);if(m.isError&&m.onFieldFailure){m.onFieldFailure(e)}if(!m.isError&&m.onFieldSuccess){m.onFieldSuccess(e)}return m.isError},_handleStatusCssClasses:function(e,d){if(d.addSuccessCssClassToField){e.removeClass(d.addSuccessCssClassToField)}if(d.addFailureCssClassToField){e.removeClass(d.addFailureCssClassToField)}if(d.addSuccessCssClassToField&&!d.isError){e.addClass(d.addSuccessCssClassToField)}if(d.addFailureCssClassToField&&d.isError){e.addClass(d.addFailureCssClassToField)}},_getErrorMessage:function(d,o,m,q,h,r,n){var k=jQuery.inArray(m,q);if(m==="custom"||m==="funcCall"){var p=q[k+1];m=m+"["+p+"]";delete (q[k])}var e=m;var f=(o.attr("data-validation-engine"))?o.attr("data-validation-engine"):o.attr("class");var j=f.split(" ");var l;if(m=="future"||m=="past"||m=="maxCheckbox"||m=="minCheckbox"){l=n(d,o,q,h,r)}else{l=n(o,q,h,r)}if(l!=undefined){var g=b._getCustomErrorMessage(c(o),j,e,r);if(g){l=g}}return l},_getCustomErrorMessage:function(k,f,j,m){var g=false;var e=/^custom\[.*\]$/.test(j)?b._validityProp.custom:b._validityProp[j];if(e!=undefined){g=k.attr("data-errormessage-"+e);if(g!=undefined){return g}}g=k.attr("data-errormessage");if(g!=undefined){return g}var d="#"+k.attr("id");if(typeof m.custom_error_messages[d]!="undefined"&&typeof m.custom_error_messages[d][j]!="undefined"){g=m.custom_error_messages[d][j]["message"]}else{if(f.length>0){for(var h=0;h<f.length&&f.length>0;h++){var l="."+f[h];if(typeof m.custom_error_messages[l]!="undefined"&&typeof m.custom_error_messages[l][j]!="undefined"){g=m.custom_error_messages[l][j]["message"];break}}}}if(!g&&typeof m.custom_error_messages[j]!="undefined"&&typeof m.custom_error_messages[j]["message"]!="undefined"){g=m.custom_error_messages[j]["message"]}return g},_validityProp:{required:"value-missing",custom:"custom-error",groupRequired:"value-missing",ajax:"custom-error",minSize:"range-underflow",maxSize:"range-overflow",min:"range-underflow",max:"range-overflow",past:"type-mismatch",future:"type-mismatch",dateRange:"type-mismatch",dateTimeRange:"type-mismatch",maxCheckbox:"range-overflow",minCheckbox:"range-underflow",equals:"pattern-mismatch",funcCall:"custom-error",creditCard:"pattern-mismatch",condRequired:"value-missing"},_required:function(j,k,g,m,h){switch(j.prop("type")){case"text":case"password":case"textarea":case"file":case"select-one":case"select-multiple":default:var l=c.trim(j.val());var f=c.trim(j.attr("data-validation-placeholder"));if((!l)||(f&&l==f)){return m.allrules[k[g]].alertText}break;case"radio":case"checkbox":if(h){if(!j.attr("checked")){return m.allrules[k[g]].alertTextCheckboxMultiple}break}var e=j.closest("form, .validationEngineContainer");var d=j.attr("name");if(e.find("input[name='"+d+"']:checked").size()==0){if(e.find("input[name='"+d+"']:visible").size()==1){return m.allrules[k[g]].alertTextCheckboxe}else{return m.allrules[k[g]].alertTextCheckboxMultiple}}break}},_groupRequired:function(g,j,e,d){var h="["+d.validateAttribute+"*="+j[e+1]+"]";var f=false;g.closest("form, .validationEngineContainer").find(h).each(function(){if(!b._required(c(this),j,e,d)){f=true;return false}});if(!f){return d.allrules[j[e]].alertText}},_custom:function(k,l,e,m){var d=l[e+1];var h=m.allrules[d];var j;if(!h){alert("jqv:custom rule not found - "+d);return}if(h.regex){var g=h.regex;if(!g){alert("jqv:custom regex not found - "+d);return}var f=new RegExp(g);if(!f.test(k.val())){return m.allrules[d].alertText}}else{if(h.func){j=h.func;if(typeof(j)!=="function"){alert("jqv:custom parameter 'function' is no function - "+d);return}if(!j(k,l,e,m)){return m.allrules[d].alertText}}else{alert("jqv:custom type not allowed "+d);return}}},_funcCall:function(k,l,e,d){var j=l[e+1];var g;if(j.indexOf(".")>-1){var h=j.split(".");var f=window;while(h.length){f=f[h.shift()]}g=f}else{g=window[j]||d.customFunctions[j]}if(typeof(g)=="function"){return g(k,l,e,d)}},_equals:function(g,h,f,e){var d=h[f+1];if(g.val()!=c("#"+d).val()){return e.allrules.equals.alertText}},_maxSize:function(j,k,g,f){var e=k[g+1];var d=j.val().length;if(d>e){var h=f.allrules.maxSize;if(typeof h.alertText2=="string"){return h.alertText+min+h.alertText2}else{return h.alertText}}},_minSize:function(j,k,g,e){var f=k[g+1];var d=j.val().length;if(d<f){var h=e.allrules.minSize;if(typeof h.alertText2=="string"){return h.alertText+f+h.alertText2}else{return h.alertText}}},_min:function(j,k,g,e){var f=parseFloat(k[g+1]);var d=parseFloat(j.val());if(d<f){var h=e.allrules.min;if(h.alertText2){return h.alertText+f+h.alertText2}return h.alertText+f}},_max:function(j,k,g,f){var e=parseFloat(k[g+1]);var d=parseFloat(j.val());if(d>e){var h=f.allrules.max;if(h.alertText2){return h.alertText+e+h.alertText2}return h.alertText+e}},_past:function(e,k,l,f,n){var d=l[f+1];var h=c(e.find("input[name='"+d.replace(/^#+/,"")+"']"));var g;if(d.toLowerCase()=="now"){g=new Date()}else{if(undefined!=h.val()){if(h.is(":disabled")){return}g=b._parseDate(h.val())}else{g=b._parseDate(d)}}var m=b._parseDate(k.val());if(m>g){var j=n.allrules.past;if(j.alertText2){return j.alertText+b._dateToString(g)+j.alertText2}return j.alertText+b._dateToString(g)}},_future:function(e,k,l,f,n){var d=l[f+1];var h=c(e.find("input[name='"+d.replace(/^#+/,"")+"']"));var g;if(d.toLowerCase()=="now"){g=new Date()}else{if(undefined!=h.val()){if(h.is(":disabled")){return}g=b._parseDate(h.val())}else{g=b._parseDate(d)}}var m=b._parseDate(k.val());if(m<g){var j=n.allrules.future;if(j.alertText2){return j.alertText+b._dateToString(g)+j.alertText2}return j.alertText+b._dateToString(g)}},_isDate:function(e){var d=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/);return d.test(e)},_isDateTime:function(e){var d=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/);return d.test(e)},_dateCompare:function(e,d){return(new Date(e.toString())<new Date(d.toString()))},_dateRange:function(f,g,e,d){if((!d.firstOfGroup[0].value&&d.secondOfGroup[0].value)||(d.firstOfGroup[0].value&&!d.secondOfGroup[0].value)){return d.allrules[g[e]].alertText+d.allrules[g[e]].alertText2}if(!b._isDate(d.firstOfGroup[0].value)||!b._isDate(d.secondOfGroup[0].value)){return d.allrules[g[e]].alertText+d.allrules[g[e]].alertText2}if(!b._dateCompare(d.firstOfGroup[0].value,d.secondOfGroup[0].value)){return d.allrules[g[e]].alertText+d.allrules[g[e]].alertText2}},_dateTimeRange:function(f,g,e,d){if((!d.firstOfGroup[0].value&&d.secondOfGroup[0].value)||(d.firstOfGroup[0].value&&!d.secondOfGroup[0].value)){return d.allrules[g[e]].alertText+d.allrules[g[e]].alertText2}if(!b._isDateTime(d.firstOfGroup[0].value)||!b._isDateTime(d.secondOfGroup[0].value)){return d.allrules[g[e]].alertText+d.allrules[g[e]].alertText2}if(!b._dateCompare(d.firstOfGroup[0].value,d.secondOfGroup[0].value)){return d.allrules[g[e]].alertText+d.allrules[g[e]].alertText2}},_maxCheckbox:function(j,k,l,h,g){var e=l[h+1];var f=k.attr("name");var d=j.find("input[name='"+f+"']:checked").size();if(d>e){g.showArrow=false;if(g.allrules.maxCheckbox.alertText2){return g.allrules.maxCheckbox.alertText+" "+e+" "+g.allrules.maxCheckbox.alertText2}return g.allrules.maxCheckbox.alertText}},_minCheckbox:function(j,k,l,h,g){var e=l[h+1];var f=k.attr("name");var d=j.find("input[name='"+f+"']:checked").size();if(d<e){g.showArrow=false;return g.allrules.minCheckbox.alertText+" "+e+" "+g.allrules.minCheckbox.alertText2}},_creditCard:function(l,m,g,o){var e=false,n=l.val().replace(/ +/g,"").replace(/-+/g,"");var d=n.length;if(d>=14&&d<=16&&parseInt(n)>0){var h=0,g=d-1,k=1,j,f=new String();do{j=parseInt(n.charAt(g));f+=(k++%2==0)?j*2:j}while(--g>=0);for(g=0;g<f.length;g++){h+=parseInt(f.charAt(g))}e=h%10==0}if(!e){return o.allrules.creditCard.alertText}},_ajax:function(p,s,k,t){var r=s[k+1];var o=t.allrules[r];var f=o.extraData;var m=o.extraDataDynamic;var j={fieldId:p.attr("id"),fieldValue:p.val()};if(typeof f==="object"){c.extend(j,f)}else{if(typeof f==="string"){var l=f.split("&");for(var k=0;k<l.length;k++){var q=l[k].split("=");if(q[0]&&q[0]){j[q[0]]=q[1]}}}}if(m){var h=[];var n=String(m).split(",");for(var k=0;k<n.length;k++){var d=n[k];if(c(d).length){var e=p.closest("form, .validationEngineContainer").find(d).val();var g=d.replace("#","")+"="+escape(e);j[d.replace("#","")]=e}}}if(t.eventTrigger=="field"){delete (t.ajaxValidCache[p.attr("id")])}if(!t.isError&&!b._checkAjaxFieldStatus(p.attr("id"),t)){c.ajax({type:t.ajaxFormValidationMethod,url:o.url,cache:false,dataType:"json",data:j,field:p,rule:o,methods:b,options:t,beforeSend:function(){},error:function(i,u){b._ajaxError(i,u)},success:function(w){var y=w[0];var v=c("#"+y).eq(0);if(v.length==1){var u=w[1];var x=w[2];if(!u){t.ajaxValidCache[y]=false;t.isError=true;if(x){if(t.allrules[x]){var i=t.allrules[x].alertText;if(i){x=i}}}else{x=o.alertText}if(t.showPrompts){b._showPrompt(v,x,"",true,t)}}else{t.ajaxValidCache[y]=true;if(x){if(t.allrules[x]){var i=t.allrules[x].alertTextOk;if(i){x=i}}}else{x=o.alertTextOk}if(t.showPrompts){if(x){b._showPrompt(v,x,"pass",true,t)}else{b._closePrompt(v)}}if(t.eventTrigger=="submit"){p.closest("form").submit()}}}v.trigger("jqv.field.result",[v,t.isError,x])}});return o.alertTextLoad}},_ajaxError:function(d,e){if(d.status==0&&e==null){alert("The page is not served from a server! ajax call failed")}else{if(typeof console!="undefined"){console.log("Ajax error: "+d.status+" "+e)}}},_dateToString:function(d){return d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()},_parseDate:function(f){var e=f.split("-");if(e==f){e=f.split("/")}if(e==f){e=f.split(".");return new Date(e[2],(e[1]-1),e[0])}return new Date(e[0],(e[1]-1),e[2])},_showPrompt:function(j,h,i,g,f,e){if(j.data("jqv-prompt-at") instanceof jQuery){j=j.data("jqv-prompt-at")}else{if(j.data("jqv-prompt-at")){j=c(j.data("jqv-prompt-at"))}}var d=b._getPrompt(j);if(e){d=false}if(c.trim(h)){if(d){b._updatePrompt(j,d,h,i,g,f)}else{b._buildPrompt(j,h,i,g,f)}}},_buildPrompt:function(j,d,h,l,n){var e=c("<div>");e.addClass(b._getClassName(j.attr("id"))+"formError");e.addClass("parentForm"+b._getClassName(j.closest("form, .validationEngineContainer").attr("id")));e.addClass("formError");switch(h){case"pass":e.addClass("greenPopup");break;case"load":e.addClass("blackPopup");break;default:}if(l){e.addClass("ajaxed")}var o=c("<div>").addClass("formErrorContent").html(d).appendTo(e);var g=j.data("promptPosition")||n.promptPosition;if(n.showArrow){var k=c("<div>").addClass("formErrorArrow");if(typeof(g)=="string"){var i=g.indexOf(":");if(i!=-1){g=g.substring(0,i)}}switch(g){case"bottomLeft":case"bottomRight":e.find(".formErrorContent").before(k);k.addClass("formErrorArrowBottom").html('<div class="line1"><!-- --></div><div class="line2"><!-- --></div><div class="line3"><!-- --></div><div class="line4"><!-- --></div><div class="line5"><!-- --></div><div class="line6"><!-- --></div><div class="line7"><!-- --></div><div class="line8"><!-- --></div><div class="line9"><!-- --></div><div class="line10"><!-- --></div>');break;case"topLeft":case"topRight":k.html('<div class="line10"><!-- --></div><div class="line9"><!-- --></div><div class="line8"><!-- --></div><div class="line7"><!-- --></div><div class="line6"><!-- --></div><div class="line5"><!-- --></div><div class="line4"><!-- --></div><div class="line3"><!-- --></div><div class="line2"><!-- --></div><div class="line1"><!-- --></div>');e.append(k);break}}if(n.addPromptClass){e.addClass(n.addPromptClass)}var m=j.attr("data-required-class");if(m!==undefined){e.addClass(m)}else{if(n.prettySelect){if(c("#"+j.attr("id")).next().is("select")){var f=c("#"+j.attr("id").substr(n.usePrefix.length).substring(n.useSuffix.length)).attr("data-required-class");if(f!==undefined){e.addClass(f)}}}}e.css({opacity:0});if(g==="inline"){e.addClass("inline");if(typeof j.attr("data-prompt-target")!=="undefined"&&c("#"+j.attr("data-prompt-target")).length>0){e.appendTo(c("#"+j.attr("data-prompt-target")))}else{j.after(e)}}else{j.before(e)}var i=b._calculatePosition(j,e,n);e.css({position:g==="inline"?"relative":"absolute",top:i.callerTopPosition,left:i.callerleftPosition,marginTop:i.marginTopSize,opacity:0}).data("callerField",j);if(n.autoHidePrompt){setTimeout(function(){e.animate({opacity:0},function(){e.closest(".formErrorOuter").remove();e.remove()})},n.autoHideDelay)}return e.animate({opacity:0.87})},_updatePrompt:function(j,e,d,h,k,l,f){if(e){if(typeof h!=="undefined"){if(h=="pass"){e.addClass("greenPopup")}else{e.removeClass("greenPopup")}if(h=="load"){e.addClass("blackPopup")}else{e.removeClass("blackPopup")}}if(k){e.addClass("ajaxed")}else{e.removeClass("ajaxed")}e.find(".formErrorContent").html(d);var i=b._calculatePosition(j,e,l);var g={top:i.callerTopPosition,left:i.callerleftPosition,marginTop:i.marginTopSize};if(f){e.css(g)}else{e.animate(g)}}},_closePrompt:function(e){var d=b._getPrompt(e);if(d){d.fadeTo("fast",0,function(){d.parent(".formErrorOuter").remove();d.remove()})}},closePrompt:function(d){return b._closePrompt(d)},_getPrompt:function(f){var g=c(f).closest("form, .validationEngineContainer").attr("id");var e=b._getClassName(f.attr("id"))+"formError";var d=c("."+b._escapeExpression(e)+".parentForm"+b._getClassName(g))[0];if(d){return c(d)}},_escapeExpression:function(d){return d.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(f){var g=c(document);var d=c("body");var e=(f&&f.hasClass("rtl"))||(f&&(f.attr("dir")||"").toLowerCase()==="rtl")||g.hasClass("rtl")||(g.attr("dir")||"").toLowerCase()==="rtl"||d.hasClass("rtl")||(d.attr("dir")||"").toLowerCase()==="rtl";return Boolean(e)},_calculatePosition:function(n,g,s){var f,o,l;var h=n.width();var d=n.position().left;var q=n.position().top;var e=n.height();var r=g.height();f=o=0;l=-r;var k=n.data("promptPosition")||s.promptPosition;var j="";var i="";var p=0;var m=0;if(typeof(k)=="string"){if(k.indexOf(":")!=-1){j=k.substring(k.indexOf(":")+1);k=k.substring(0,k.indexOf(":"));if(j.indexOf(",")!=-1){i=j.substring(j.indexOf(",")+1);j=j.substring(0,j.indexOf(","));m=parseInt(i);if(isNaN(m)){m=0}}p=parseInt(j);if(isNaN(j)){j=0}}}switch(k){default:case"topRight":o+=d+h-30;f+=q;break;case"topLeft":f+=q;o+=d;break;case"centerRight":f=q+4;l=0;o=d+n.outerWidth(true)+5;break;case"centerLeft":o=d-(g.width()+2);f=q+4;l=0;break;case"bottomLeft":f=q+n.height()+5;l=0;o=d;break;case"bottomRight":o=d+h-30;f=q+n.height()+5;l=0;break;case"inline":o=0;f=0;l=0}o+=p;f+=m;return{callerTopPosition:f+"px",callerleftPosition:o+"px",marginTopSize:l+"px"}},_saveOptions:function(f,e){if(c.validationEngineLanguage){var d=c.validationEngineLanguage.allRules}else{c.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page")}c.validationEngine.defaults.allrules=d;var g=c.extend(true,{},c.validationEngine.defaults,e);f.data("jqv",g);return g},_getClassName:function(d){if(d){return d.replace(/:/g,"_").replace(/\./g,"_")}},_jqSelector:function(d){return d.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(h,j,f,e){var d,g;for(d=(f+1);d<j.length;d++){g=jQuery("#"+j[d]).first();if(g.length&&b._required(g,["required"],0,e,true)==undefined){return b._required(h,["required"],0,e)}}},_submitButtonClick:function(f){var d=c(this);var e=d.closest("form, .validationEngineContainer");e.data("jqv_submitButton",d.attr("id"))}};c.fn.validationEngine=function(e){var d=c(this);if(!d[0]){return d}if(typeof(e)=="string"&&e.charAt(0)!="_"&&b[e]){if(e!="showPrompt"&&e!="hide"&&e!="hideAll"){b.init.apply(d)}return b[e].apply(d,Array.prototype.slice.call(arguments,1))}else{if(typeof e=="object"||!e){b.init.apply(d,arguments);return b.attach.apply(d)}else{c.error("Method "+e+" does not exist in jQuery.validationEngine")}}};c.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:true,focusFirstField:true,showPrompts:true,validateNonVisibleFields:false,promptPosition:"topRight",bindMethod:"bind",inlineAjax:false,ajaxFormValidation:false,ajaxFormValidationURL:false,ajaxFormValidationMethod:"get",onAjaxFormComplete:c.noop,onBeforeAjaxFormValidation:c.noop,onValidationComplete:false,doNotShowAllErrosOnSubmit:false,custom_error_messages:{},binded:true,showArrow:true,isError:false,maxErrorsPerField:false,ajaxValidCache:{},autoPositionUpdate:false,InvalidFields:[],onFieldSuccess:false,onFieldFailure:false,onSuccess:false,onFailure:false,validateAttribute:"class",addSuccessCssClassToField:"",addFailureCssClassToField:"",autoHidePrompt:false,autoHideDelay:10000,fadeDuration:0.3,prettySelect:false,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:false}};var a={hook:"rightmiddle",hideOn:false,skin:"cloud",hideOthers:false};b._buildPrompt=function(h,f,g,e,d){h.data("promptText",f);Tipped.create(h[0],f,a);Tipped.show(h[0])};b._closePrompt=function(d){d.data("promptText","");Tipped.remove(d[0])};b._updatePrompt=function(j,d,h,i,g,f,e){if(j.data("promptText")!=h){b._closePrompt(j);b._buildPrompt(j,h)}};b._getPrompt=function(d){return Tipped.get(d[0])};c(function(){c.validationEngine.defaults.promptPosition=b.isRTL()?"topLeft":"topRight"})})(jQuery);