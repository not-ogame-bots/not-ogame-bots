function setupOverlay(a,b,c){$(".build-it_premium").addClass("overlay");$(".build-it_premium").attr("href",a);$(".build-it_premium").data("overlay-title",b);$(".build-it_premium").data("techid",c)}function setupBuildinglistForBuildItButton(a,c,b){new baulisteCountdown(document.getElementById("possibleInTime"),buildableAt,pageToReload)}function drawErrorbox(c,e,g,b,d,f){var f=f==undefined?false:f;var a=f!==false?$("."+f):$(".build-it_disabled");if(typeof(d)=="undefined"||d==""){d=document.location.href}a.click(function(){if(g!==undefined&&b!==undefined&&d!==undefined){if(c=="notify"){errorBoxNotify(g,e,b.allOk,function(){window.location.href=d})}if(c=="decision"){errorBoxDecision(g,e,b.allYes,b.allNo,function(){window.location.href=d})}}if(c=="fadeBox"){fadeBox(e,true)}})}function initializeBuildItButton(){if(hasCommander&&buildableAt>0){setupBuildinglistForBuildItButton(loca.allDetailNow,techID,showSlotWarning)}if(buttonState){$(".build-it").on("click",function(){sendBuildRequest(null,null,showSlotWarning)})}else{if(couldBeBuild){$errorCount=showErrors()}else{$errorCount=99}if((error==null||error==0)&&$errorCount==0){$(".build-it_premium").on("click",function(){var b=$("#build_amount").val();if(typeof b=="undefined"){b=1}var a=links.overlay+"&amount="+b;setupOverlay(a,overlayTitle,techID)})}}$(document).off("keypress.submitBuild").on("keypress.submitBuild","#contentWrapper #inhalt #number",function(b){if(b.keyCode!=13){return}b.stopPropagation();var a=$(".build-it_premium");if(a.length){a.trigger("click")}else{$(".build-it").trigger("click")}})}function showErrors(){var a={allYes:loca.allYes,allNo:loca.allNo,allOk:loca.allOk};if(isBuildlistNeeded){if(!hasCommander&&!(isShip||isRocket)){drawErrorbox("decision",loca.infoBuildlist,loca.allError,a,links.decisionCommander,"build-it_premium");return 1}if(isRocketAndStorageNotFree){drawErrorbox("notify",loca.noRocketsiloCapacity,loca.allError,a,links.notify);return 1}}else{if(error!==null&&error!==0){if(premiumerror){if(showErrorOnPremiumbutton){drawErrorbox("decision",errorlist[error],loca.allError,a,links[error],buttonClass);return 1}else{drawErrorbox("decision",errorlist[error],loca.allError,a,links[error]);return 1}}else{if(isRocketAndStorageNotFree){drawErrorbox("notify",loca.noRocketsiloCapacity,loca.allError,a,links.notify);return 1}else{if(isBusy){return 1}else{drawErrorbox("notify",errorlist[error],loca.allError,a,"");return 1}}}}}return 0}function initTechDetailsAjax(){initializeBuildItButton();refreshBars("bar_container","filllevel_bar")};