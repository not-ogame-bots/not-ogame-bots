/*
 * Spinners 3.0.0
 * (c) 2010-2012 Nick Stakenburg - http://www.nickstakenburg.com
 *
 * Spinners is freely distributable under the terms of an MIT-style license.
 *
 * GitHub: http://github.com/staaky/spinners
 */
var Spinners={version:"3.0.0"};(function(j){function i(b){return b*Math.PI/180}function p(b){this.element=b}function o(a,d){a&&(this.element=a,k.remove(a),k.removeDetached(),this._position=0,this._state="stopped",this.setOptions(j.extend({color:"#000",dashes:12,radius:5,height:5,width:1.8,opacity:1,padding:3,rotation:700},d||{})),this.drawPosition(0),k.add(this))}var n={scroll:function(e,d){if(!d){return e}var f=e.slice(0,d);return e.slice(d,e.length).concat(f)},isElement:function(b){return b&&1==b.nodeType},element:{isAttached:function(){return function(b){for(;b&&b.parentNode;){b=b.parentNode}return !!b&&!!b.body}}()}},m={drawRoundedRectangle:function(u,t){var s=j.extend({top:0,left:0,width:0,height:0,radius:0},t||{}),r=s.left,q=s.top,b=s.width,a=s.height,s=s.radius;u.beginPath(),u.moveTo(r+s,q),u.arc(r+b-s,q+s,s,i(-90),i(0),!1),u.arc(r+b-s,q+a-s,s,i(0),i(90),!1),u.arc(r+s,q+a-s,s,i(90),i(180),!1),u.arc(r+s,q+s,s,i(-180),i(-90),!1),u.closePath(),u.fill()}},l=function(){function e(b){var g=[];0==b.indexOf("#")&&(b=b.substring(1)),b=b.toLowerCase();if(""!=b.replace(d,"")){return null}3==b.length?(g[0]=b.charAt(0)+b.charAt(0),g[1]=b.charAt(1)+b.charAt(1),g[2]=b.charAt(2)+b.charAt(2)):(g[0]=b.substring(0,2),g[1]=b.substring(2,4),g[2]=b.substring(4));for(b=0;b<g.length;b++){g[b]=parseInt(g[b],16)}return g.red=g[0],g.green=g[1],g.blue=g[2],g}var d=RegExp("[0123456789abcdef]","g"),f=function(){function b(h,g,q){return h=h.toString(q||10),Array(g-h.length).join("0")+h}return function(a,h,g){return"#"+b(a,2,16)+b(h,2,16)+b(g,2,16)}}();return{hex2rgb:e,hex2fill:function(a,q){"undefined"==typeof q&&(q=1);var h=q,g=e(a);return g[3]=h,g.opacity=h,"rgba("+g.join()+")"},rgb2hex:f}}();j.extend(Spinners,{enabled:!1,support:{canvas:function(){var a=j("<canvas>")[0];return !!a.getContext&&!!a.getContext("2d")}()},init:function(){if(this.support.canvas||window.G_vmlCanvasManager&&window.attachEvent&&-1===navigator.userAgent.indexOf("Opera")){window.G_vmlCanvasManager&&window.G_vmlCanvasManager.init_(document),this.enabled=!0}},create:function(d,c){return p.create(d,c),this.get(d)},get:function(b){return new p(b)},play:function(b){return this.get(b).play(),this},pause:function(b){return this.get(b).pause(),this},toggle:function(b){return this.get(b).toggle(),this},stop:function(b){return this.get(b).stop(),this},remove:function(b){return this.get(b).remove(),this},removeDetached:function(){return k.removeDetached(),this},center:function(b){return this.get(b).center(),this},setOptions:function(d,c){return this.get(d).setOptions(c),this},getDimensions:function(b){return b=2*k.get(b)[0].getLayout().workspace.radius,{width:b,height:b}}});var k={spinners:[],get:function(a){if(a){var d=[];return j.each(this.spinners,function(c,b){b&&(n.isElement(a)?b.element==a:j(b.element).is(a))&&d.push(b)}),d}},add:function(b){this.spinners.push(b)},remove:function(a){j(j.map(this.spinners,function(b){if(n.isElement(a)?b.element==a:j(b.element).is(a)){return b.element}})).each(j.proxy(function(d,c){this.removeByElement(c)},this))},removeByElement:function(a){var d=this.get(a)[0];d&&(d.remove(),this.spinners=j.grep(this.spinners,function(b){return b.element!=a}))},removeDetached:function(){j.each(this.spinners,j.proxy(function(d,c){c&&c.element&&!n.element.isAttached(c.element)&&this.remove(c.element)},this))}};j.extend(p,{create:function(a,h){if(a){var e=h||{},d=[];return n.isElement(a)?d.push(new o(a,e)):j(a).each(function(f,c){d.push(new o(c,e))}),d}}}),j.extend(p.prototype,{items:function(){return k.get(this.element)},play:function(){return j.each(this.items(),function(d,c){c.play()}),this},stop:function(){return j.each(this.items(),function(d,c){c.stop()}),this},pause:function(){return j.each(this.items(),function(d,c){c.pause()}),this},toggle:function(){return j.each(this.items(),function(d,c){c.toggle()}),this},center:function(){return j.each(this.items(),function(d,c){c.center()}),this},setOptions:function(a){return j.each(this.items(),function(b,d){d.setOptions(a)}),this},remove:function(){return k.remove(this.element),this}}),j.extend(o.prototype,{setOptions:function(a){this.options=j.extend({},this.options,a||{}),this.options.radii&&(a=this.options.radii,this.options.radius=Math.min(a[0],a[1]),this.options.height=Math.max(a[0],a[1])-this.options.radius),this.options.dashWidth&&(this.options.width=this.options.dashWidth),this.options.speed&&(this.options.duration=1000*this.options.speed);var a=this._state,d=this._position;this._layout=null,this.build(),d&&d>=this.options.dashes-1&&(this._position=this.options.dashes-1);switch(a){case"playing":this.play();break;case"paused":case"stopped":this.drawPosition(this._position)}this._centered&&this.center()},remove:function(){this.canvas&&(this.pause(),j(this.canvas).remove(),this.ctx=this.canvas=null)},build:function(){this.remove();var a=this.getLayout().workspace.radius;return j(document.body).append(this.canvas=j("<canvas>").attr({width:2*a,height:2*a}).css({zoom:1})),window.G_vmlCanvasManager&&G_vmlCanvasManager.initElement(this.canvas[0]),this.ctx=this.canvas[0].getContext("2d"),this.ctx.globalAlpha=this.options.opacity,j(this.element).append(this.canvas),this.ctx.translate(a,a),this},drawPosition:function(b){var h=this.getLayout().workspace,b=n.scroll(h.opacities,-1*b),g=h.radius,h=this.options.dashes,e=i(360/h);this.ctx.clearRect(-1*g,-1*g,2*g,2*g);for(g=0;g<h;g++){this.drawDash(b[g],this.options.color),this.ctx.rotate(e)}},drawDash:function(g,f){this.ctx.fillStyle=l.hex2fill(f,g);var r=this.getLayout(),q=r.workspace.radius,h=r.dash.position,r=r.dash.dimensions;m.drawRoundedRectangle(this.ctx,{top:h.top-q,left:h.left-q,width:r.width,height:r.height,radius:Math.min(r.height,r.width)/2})},_nextPosition:function(){var a=this.options.rotation/this.options.dashes;this.nextPosition(),this._playTimer=window.setTimeout(j.proxy(this._nextPosition,this),a)},nextPosition:function(){this._position==this.options.dashes-1&&(this._position=-1),this._position++,this.drawPosition(this._position)},play:function(){if("playing"!=this._state){this._state="playing";var a=this.options.rotation/this.options.dashes;return this._playTimer=window.setTimeout(j.proxy(this._nextPosition,this),a),this}},pause:function(){if("paused"!=this._state){return this._pause(),this._state="paused",this}},_pause:function(){this._playTimer&&(window.clearTimeout(this._playTimer),this._playTimer=null)},stop:function(){if("stopped"!=this._state){return this._pause(),this._position=0,this.drawPosition(0),this._state="stopped",this}},toggle:function(){return this["playing"==this._state?"pause":"play"](),this},getLayout:function(){if(this._layout){return this._layout}for(var y=this.options,x=y.dashes,w=y.width,v=y.radius,u=y.radius+y.height,t=Math.max(w,u),t=Math.ceil(Math.max(t,Math.sqrt(u*u+w/2*(w/2)))),y=t+=y.padding,s=1/x,r=[],q=0;q<x;q++){r.push((q+1)*s)}return this._layout=x={workspace:{radius:y,opacities:r},dash:{position:{top:t-u,left:t-w/2},dimensions:{width:w,height:u-v}}}},center:function(){var a=2*this.getLayout().workspace.radius;j(this.element.parentNode).css({position:"relative"}),j(this.element).css({position:"absolute",height:a+"px",width:a+"px",top:"50%",left:"50%",marginLeft:-0.5*a+"px",marginTop:-0.5*a+"px"}),this._centered=!0}}),Spinners.init(),Spinners.enabled||(p.create=function(){return[]})})(jQuery);